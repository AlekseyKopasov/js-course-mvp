# Метод map()

## Основные принципы работы

Метод `map()` создает новый массив, применяя функцию-колбэк к каждому элементу исходного массива.

### Ключевые особенности:

- Не изменяет исходный массив
- Возвращает новый массив той же длины
- Принимает функцию-колбэк с тремя параметрами:
  1. Текущий элемент
  2. Индекс элемента
  3. Сам массив

## Примеры использования

### 1. Преобразование числового массива

```javascript
const numbers = [1, 2, 3, 4, 5];

// Возведение в квадрат
const squares = numbers.map((num) => num ** 2);
// [1, 4, 9, 16, 25]

// Упрощенная запись без return
const doubled = numbers.map((num) => num * 2);
// [2, 4, 6, 8, 10]
```

### 2. Работа с объектами

```javascript
const users = [
  { id: 1, name: 'Анна', email: 'anna@example.com', age: 25 },
  { id: 2, name: 'Иван', email: 'ivan@example.com', age: 30 },
];

// Извлечение нужных полей
const userContacts = users.map((user) => ({
  name: user.name,
  email: user.email,
}));

/*
[
  {name: 'Анна', email: 'anna@example.com'},
  {name: 'Иван', email: 'ivan@example.com'}
]
*/
```

### 3. Использование индекса

```javascript
const items = ['a', 'b', 'c'];

const indexedItems = items.map((item, index) => ({
  value: item,
  position: index,
}));

/*
[
  {value: 'a', position: 0},
  {value: 'b', position: 1},
  {value: 'c', position: 2}
]
*/
```

## Сравнение с forEach()

| Характеристика        | map()        | forEach()          |
| --------------------- | ------------ | ------------------ |
| Возвращаемое значение | Новый массив | undefined          |
| Изменение исходного   | Нет          | Возможно (мутация) |
| Цепочка методов       | Да           | Нет                |
| Производительность    | Медленнее    | Быстрее            |

## Практические советы

### Не используйте map если:

- Нужен только перебор элементов
- Не используете возвращаемый массив
- Требуется максимальная производительность

### Лучшие практики:

- Избегайте мутаций исходных данных
- Делайте колбэки чистыми функциями
- Используйте деструктуризацию для сложных объектов

```javascript
const names = users.map(({ name }) => name);
```

Метод **map()** — идеальный выбор для преобразования массивов без побочных эффектов.

----

## Домашнее задание

### Уровень 1
**1. Базовое преобразование**

Дан массив чисел: `[1, 2, 3, 4, 5]`.  
Используя `map`, создайте новый массив, где каждое число умножено на 3.

**2. Работа со строками**

Дан массив строк: `["apple", "banana", "cherry"]`.  
Создайте новый массив, содержащий длины каждой строки.

----

### Уровень 2
**3. Извлечение свойств объектов**

Дан массив объектов:
```javascript
const books = [
  { title: "JavaScript: The Good Parts", pages: 176 },
  { title: "Clean Code", pages: 464 },
  { title: "Design Patterns", pages: 395 }
]
```
Создайте массив, содержащий только названия книг.

**4. Форматирование данных**

Дан массив температур в Цельсиях: `[0, 15, 25, 32, 40]`.
Преобразуйте их в Фаренгейты по формуле: `F = C * 1.8 + 32`.

----

### Уровень 3
**5. Комплексное преобразование**

Дан массив пользователей:

```javascript
const users = [
  { id: 1, name: "Anna", isActive: true },
  { id: 2, name: "Ivan", isActive: false },
  { id: 3, name: "Maria", isActive: true }
]
```
Создайте массив строк вида: `"User [name] is [active/inactive]"`.

**6. Работа с индексами**

Дан массив: `["a", "b", "c", "d"]`.
Создайте новый массив объектов вида: `{char: "a", index: 0, isEven: false}`.

----

### Уровень 4
**7. Цепочка методов**

Дан массив чисел: `[1, 2, 3, 4, 5, 6, 7, 8, 9, 10]`.
Используя цепочку методов `map` и `filter`:

1. Умножьте каждое число на **2**
2. Оставьте только числа больше **10**
3.  Вычтите из каждого числа **5**

**8. Парсинг URL**

Дан массив URL:

```javascript
const urls = [
  "https://example.com/products/1",
  "https://example.com/products/2",
  "https://example.com/products/3"
]
```
Извлеките `ID` продуктов в массив чисел.

----

### Уровень 5
**9. Асинхронный map**

Реализуйте функцию `asyncMap`, которая принимает массив и асинхронную функцию, и возвращает промис, который разрешится массивом результатов.

**10. Полифил для map**

Напишите собственную реализацию метода `map` (полифил), которая будет работать так же, как стандартный метод.

----

### Бонусное задание
**11. Оптимизация производительности**

Дан очень большой массив чисел (1+ млн элементов).
Напишите оптимальную реализацию преобразования массива, учитывающую:

- Минимальное использование памяти
- Максимальную производительность
- Возможность отмены операции
